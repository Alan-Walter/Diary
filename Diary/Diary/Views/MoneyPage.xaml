<?xml version="1.0" encoding="utf-8" ?>
<ContentPage 
        xmlns="http://xamarin.com/schemas/2014/forms"
        xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
        x:Class="Diary.Views.MoneyPage"
        xmlns:converter="clr-namespace:Diary.Converters"
        Title="Money">
    <ContentPage.Resources>
        <ResourceDictionary>
            <converter:DoubleToColorConverter x:Key="doubleToColor" />
        </ResourceDictionary>
    </ContentPage.Resources>


    <ContentPage.ToolbarItems>
        <ToolbarItem Text="History" Command="{Binding HistoryCommand}"/>
        <ToolbarItem Text="Categories" Command="{Binding CategoriesCommand}"/>
    </ContentPage.ToolbarItems>
    
    <ContentPage.Content>

        <StackLayout Margin="20">
            <Frame>
                <Label>
                    <Label.FormattedText>
                        <FormattedString>
                            <Span Text="Balance: "/>
                            <Span Text="{Binding Balance}" TextColor="{Binding Balance, Converter={StaticResource doubleToColor}}" FontAttributes="Bold"/>
                        </FormattedString>
                    </Label.FormattedText>
                </Label>
            </Frame>
            <Frame>
                <Label>
                    <Label.FormattedText>
                        <FormattedString>
                            <Span Text="Current month:&#x0a;" TextDecorations="Underline"/>
                            <Span Text="Income: "/>
                            <Span Text="{Binding Income}" TextColor="Green"/>
                            <Span Text="&#x0a;Expense: "/>
                            <Span Text="{Binding Expense}" TextColor="Red"/>
                        </FormattedString>
                    </Label.FormattedText>
                </Label>
            </Frame>
            <Frame>
                <Label>
                    <Label.FormattedText>
                        <FormattedString>
                            <Span Text="Avg per month:&#x0a;" TextDecorations="Underline"/>
                            <Span Text="Income: "/>
                            <Span Text="{Binding AverageIncome}" TextColor="Green"/>
                            <Span Text="&#x0a;Expense: "/>
                            <Span Text="{Binding AverageExpense}" TextColor="Red"/>
                        </FormattedString>
                    </Label.FormattedText>
                </Label>
            </Frame>

            <ActivityIndicator IsRunning="{Binding IsBusy}"
                                VerticalOptions="CenterAndExpand" HorizontalOptions="CenterAndExpand" />



            <Button VerticalOptions="EndAndExpand" Text="Add" HorizontalOptions="CenterAndExpand" Command="{Binding AddMoneyCommand}"/>

        </StackLayout>

    </ContentPage.Content>


</ContentPage>